## 1. WebRTC

1) ê¸°ì´ˆ ê°œë…
**WebRTC(Web Real-Time Communication)**ëŠ” ë¸Œë¼ìš°ì €ë¼ë¦¬ ì‹¤ì‹œê°„ ì˜¤ë””ì˜¤Â·ë¹„ë””ì˜¤Â·ë°ì´í„°ë¥¼ ì§ì ‘ ì£¼ê³ ë°›ì„ ìˆ˜ ìžˆê²Œ í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.
ë³„ë„ í”ŒëŸ¬ê·¸ì¸ ì—†ì´ ìžë°”ìŠ¤í¬ë¦½íŠ¸ APIë§Œìœ¼ë¡œ í™”ìƒí†µí™”, ìŒì„±í†µí™”, í™”ë©´ ê³µìœ  ê°™ì€ ê¸°ëŠ¥ì„ ë§Œë“¤ ìˆ˜ ìžˆë‹¤.

ðŸ”§ í•µì‹¬ API 3ê°€ì§€
```
getUserMedia() â†’ ì¹´ë©”ë¼Â·ë§ˆì´í¬ ìŠ¤íŠ¸ë¦¼ íšë“
RTCPeerConnection â†’ P2P ì—°ê²° ìƒì„±Â·ê´€ë¦¬  
RTCDataChannel â†’ í…ìŠ¤íŠ¸Â·íŒŒì¼ ë°ì´í„° ì „ì†¡
```

ðŸ“Š ìƒë‹´ ì„œë¹„ìŠ¤ ë™ìž‘ íë¦„
```
1. ê³ ê°(QR ì ‘ì†) â†” ìƒë‹´ì›(ëŒ€ì‹œë³´ë“œ)
   â†“ ì‹œê·¸ë„ë§ ì„œë²„ (Socket.IO)
2. SDP(Offer/Answer) + ICE Candidate êµí™˜  
3. P2P ì—°ê²° ì„±ë¦½ â†’ ì‹¤ì‹œê°„ ìŒì„± ì „ì†¡
   â†“ ë³‘ë ¬ ì²˜ë¦¬
4. AI ëª¨ë“ˆ â†’ STT ìžë§‰ + ìš•ì„¤ ë§ˆìŠ¤í‚¹
```

2) íƒ„ìƒ ë°°ê²½
**WebSocket + í¬ë¡¬ ë¸Œë¼ìš°ì € ë“±ìž¥**Â â†’Â **ë¸Œë¼ìš°ì €ì—ì„œ í†µí™” ê°€ëŠ¥**í•œÂ **WebRTC**Â íƒ„ìƒ

```
2011ë…„: W3C WebRTC ë°œí‘œ
- êµ¬ê¸€ + ì—ë¦­ìŠ¨ í”„ë¡œì íŠ¸ â†’ W3C í‘œì¤€ API ì •ì˜
- í¬ë¡¬, íŒŒì´ì–´í­ìŠ¤ì—ì„œ ë¨¼ì € êµ¬í˜„

ê°œë°œìž ê´€ì‹¬ í¬ì¸íŠ¸:
âœ… ë¸Œë¼ìš°ì € **ë‚´ìž¥ ë¯¸ë””ì–´ì—”ì§„** (ë³„ë„ í”ŒëŸ¬ê·¸ì¸ X)
âœ… **P2P ì§ì ‘ í†µì‹ ** (ì„œë²„ ë¶€í•˜â†“, ë¹„ìš©â†“)
```

ðŸŽ¯ WebRTCê°€ í•´ê²°í•œ ë¬¸ì œ

```
ê¸°ì¡´ SIP ë°©ì‹ âŒ
- ë³µìž¡í•œ ì„œë²„ êµ¬ì¶•
- í”Œëž«í¼ë³„ ë¯¸ë””ì–´ì—”ì§„ ë³„ë„ ê°œë°œ

WebRTC âœ…
- JS APIë§Œìœ¼ë¡œ ìŒì„±/ì˜ìƒ/íŒŒì¼ ê³µìœ 
- 1:1 ~ 1:N ~ N:N ëª¨ë“  í†µí™” íŒ¨í„´ ì§€ì›
```


3) WebRTC êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          JavaScript API      â”‚ â† ê°œë°œìžê°€ ì ‘ê·¼í•˜ëŠ” ë¶€ë¶„
â”œâ”€â”€â”€â”€â”€â”€â”€â”€PeerConnectionâ”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† P2P ì—°ê²° ê´€ë¦¬
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€Signalingâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† WebSocket (SDP/ICE êµí™˜)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€Transportâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”œâ”€Voice Engineâ”€â”¤Videoâ”€â”¤    â”‚ â† ë¸Œë¼ìš°ì € ë‚´ìž¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ðŸ”§ ê° êµ¬ì„±ìš”ì†Œ ì—­í• 

| êµ¬ì„±ìš”ì†Œ | ì—­í•  |
| --- | --- |
| **JavaScript API** | `getUserMedia()`, `RTCPeerConnection` ë“± |
| **PeerConnection** | ë‘ ë¸Œë¼ìš°ì € ê°„ ì—°ê²° ìƒì„±/ê´€ë¦¬ |
| **Signaling** | **WebSocket**ìœ¼ë¡œ SDP/ICE ì •ë³´ êµí™˜ |
| **Transport** | **SRTP**(ìŒì„±/ì˜ìƒ), **SCTP**(íŒŒì¼) |
| **Voice/Video Engine** | ë¸Œë¼ìš°ì €ì— ë‚´ìž¥ëœ ë¯¸ë””ì–´ ì²˜ë¦¬ |



4) **WebRTC í†µì‹ ì˜ í•µì‹¬ 3ìš”ì†Œ**

**ðŸ–¥ï¸ 1. Signaling (WebSocket ì„œë²„)**

```
ë¬¸ì œ: ë¸Œë¼ìš°ì €ë¼ë¦¬ IP/í¬íŠ¸/ì½”ë± ì •ë³´ ëª¨ë¦„
í•´ê²°: ë³„ë„ WebSocket ì„œë²„ë¡œ ì •ë³´ êµí™˜

ê³ ê° â”€â”€"join(room123)"â”€â”€â–º WebSocket â”€â”€"ìƒˆ í†µí™”ìš”ì²­"â”€â”€â–º ìƒë‹´ì›
     â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"offer(SDP)"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”€â”€"answer(SDP)"â”€â”€â–º WebSocket â”€â”€"í†µí™” ìˆ˜ë½"â”€â”€â–º ìƒë‹´ì›
```

ðŸŒ 2. ICE (STUN ì„œë²„)

```
**ICE = Interactive Connectivity Establishment**

1. Host Candidate: ê°™ì€ ë„¤íŠ¸ì›Œí¬ ë‚´ (ë°© ë²ˆí˜¸ë§Œ ì•Œë©´ OK)
2. STUN Server ë¬¸ì˜ â†’ ê³µì¸ IP/í¬íŠ¸ í™•ì¸

STUN ìš”ì²­ íë¦„:
ë¸Œë¼ìš°ì € â†’ STUN(Google/AWS) â†’ "ë‹¹ì‹ ì˜ ê³µì¸IP:í¬íŠ¸ = 203.0.113.1:54320"
```

ðŸ”„ 3. TURN ì„œë²„ (ìµœí›„ ìˆ˜ë‹¨)

```
P2P ë¶ˆê°€ëŠ¥ ìƒí™© (ë°©í™”ë²½/NAT ì œí•œ)
â†’ TURN ì„œë²„ê°€ ë°ì´í„° **ì¤‘ê³„**

| ì„œë²„ | ì„±ê³µë¥  | ë¹„ìš© | ì§€ì—° |
|------|--------|------|------|
| STUN | 80% | ë‚®ìŒ | ë‚®ìŒ (P2P) |
| TURN | 99% | ë†’ìŒ | ë†’ìŒ (ì¤‘ê³„) |
```

4. ì‹¤ì œ í†µí™” ì—°ê²° ê³¼ì •

```
1ï¸âƒ£ ë°œì‹ ì¸¡(STUN ìš”ì²­) â†’ "ë‚˜ì˜ ê³µì¸IP/í¬íŠ¸ = X"
2ï¸âƒ£ WebSocket â†’ ìˆ˜ì‹ ì¸¡ì— "í†µí™”ìš”ì²­(X ì •ë³´ í¬í•¨)"
3ï¸âƒ£ ìˆ˜ì‹ ì¸¡(STUN ìš”ì²­) â†’ "ë‚˜ì˜ ê³µì¸IP/í¬íŠ¸ = Y"  
4ï¸âƒ£ WebSocket â†’ ë°œì‹ ì¸¡ì— "í†µí™” ìˆ˜ë½(Y ì •ë³´ í¬í•¨)"
5ï¸âƒ£ **P2P ì—°ê²° ì„±ë¦½ â†’ SRTPë¡œ ìŒì„± ì „ì†¡**
```


ðŸ“¡ ì „ì†¡ í”„ë¡œí† ì½œ

```
SRTP (Secure RTP): ìŒì„±/ì˜ìƒ â†’ **UDP ê¸°ë°˜** (ì†ë„ ìµœìš°ì„ )
SCTP (Stream Control): íŒŒì¼ ê³µìœ  â†’ UDPì§€ë§Œ TCP ì‹ ë¢°ì„±
```

---




## 2. JIRA í”„ë¡œì íŠ¸ ê´€ë¦¬ êµ¬ì¡°

**ê°œë…**: ì—í”½(í° ì—…ë¬´ ë¸”ëŸ­)>ìŠ¤í† ë¦¬>í…ŒìŠ¤í¬(ì œì¼ ìž‘ì€ ì—…ë¬´ ë‹¨ìœ„)
         ìŠ¤í”„ë¦°íŠ¸ëŠ” ì‹œê°„ íë¦„ ê´€ë¦¬ ë‹´ë‹¹

ðŸ“ ì—í”½(Epic) ì˜ˆì‹œ

```
WEBRTC-EP001: íšŒì›ê´€ë¦¬  
  â”œâ”€â”€ íšŒì›ê°€ìž…/íƒˆí‡´/ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
  â””â”€â”€ ìƒë‹´ì›Â·ê´€ë¦¬ìž ê¶Œí•œ ê´€ë¦¬

WEBRTC-EP002: í†µí™” ì—°ê²°  
  â”œâ”€â”€ QR ê³ ê° ëžœë”© â†’ ê³ ê°ì •ë³´ ìž…ë ¥
  â”œâ”€â”€ ìƒë‹´ì› í†µí™” ìˆ˜ì‹ /ê±°ì ˆ
  â””â”€â”€ WebRTC 1:1 ì—°ê²°

WEBRTC-EP003: ìŒì„±ì²˜ë¦¬  
  â”œâ”€â”€ ì‹¤ì‹œê°„ STT ìžë§‰ ë³€í™˜
  â”œâ”€â”€ ìš•ì„¤ ìžë™ ë§ˆìŠ¤í‚¹(ì‚ì†Œë¦¬+ë¸”ëŸ¬)
  â””â”€â”€ í™”ìž êµ¬ë¶„(ê³ ê°/ìƒë‹´ì›)

WEBRTC-EP004: ìƒë‹´ ê¸°ë¡  
  â”œâ”€â”€ íƒ€ìž„ìŠ¤íƒ¬í”„ë³„ ëŒ€í™” ë¡œê·¸
  â””â”€â”€ ìƒë‹´ ë‚´ìš© ìžë™ ì €ìž¥

WEBRTC-EP005: ê´€ë¦¬ìž ëŒ€ì‹œë³´ë“œ
  â””â”€â”€ ìƒë‹´ì› ëª©ë¡Â·ìƒíƒœ ê´€ë¦¬
```

ðŸ“… ìŠ¤í”„ë¦°íŠ¸ ê³„íš
```
Sprint 1 (1~2ì£¼): ê¸°ë°˜ êµ¬ì¶•
- íšŒì›CRUD + QR ëžœë”© + ê¸°ë³¸ í†µí™”

Sprint 2 (3~4ì£¼): í•µì‹¬ ê¸°ëŠ¥  
- WebRTC ì—°ê²° + STT + ìš•ì„¤ ë§ˆìŠ¤í‚¹

Sprint 3 (5~6ì£¼): ì™„ì„±ë„ í–¥ìƒ
- ìƒë‹´ ê¸°ë¡ + ê´€ë¦¬ìž ê¸°ëŠ¥
```

## 3. JWT ì¸ì¦ ì´í•´í•˜ê¸°
JWT(Json Web Token) = ë¡œê·¸ì¸ í›„ ì„œë²„ê°€ ë°œê¸‰í•˜ëŠ” ì•”í˜¸í™”ëœ ì‚¬ìš©ìž ì‹ë³„ í† í°


ðŸŽ¯ ìƒë‹´ì› ì„œë¹„ìŠ¤ ì ìš© ë°©ì‹
```
1. ìƒë‹´ì› ë¡œê·¸ì¸ â†’ ì„œë²„ JWT ë°œê¸‰
   Payload: {user_id: "agent001", role: "agent", exp: 24ì‹œê°„}

2. Socket.IO ì‹œê·¸ë„ë§ ì ‘ì†  
   ws://server?token=eyJhbGciOiJIUzI1NiJ9...
   â†“ ì„œë²„ì—ì„œ JWT ê²€ì¦ â†’ ì—°ê²° í—ˆìš©

3. API í˜¸ì¶œë§ˆë‹¤ Authorization í—¤ë”
   Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...

```

QR ê³ ê°ì€ ë¡œê·¸ì¸ ì—†ì´ room_idë§Œìœ¼ë¡œ ìž„ì‹œ ì ‘ì† â†’ ìƒë‹´ì›ë§Œ JWT ì¸ì¦

4. ì‹œê·¸ë„ë§ ì„œë²„ (Socket.IO êµ¬í˜„)
ë¬¸ì œ: WebRTCëŠ” P2P ë¯¸ë””ì–´ëŠ” ë˜ì§€ë§Œ ì—°ê²° ì „ ì •ë³´ êµí™˜(SDP/ICE)ì€ ì•ˆë¨

í•´ê²°: Socket.IOë¡œ ì¤‘ê³„ ì„œë²„ êµ¬ì¶•

ðŸ”„ ì‹œê·¸ë„ë§ ë©”ì‹œì§€ íë¦„

```
ê³ ê° ë¸Œë¼ìš°ì €              Socket.IO ì„œë²„              ìƒë‹´ì› ë¸Œë¼ìš°ì €
    |                         |                         |
    |--- join(room123) ----->|                         |
    |<-- joined ------------|                         |
    |                         |<-- login(JWT) --------|
    |                         |--> authenticated ---->|
    |                         |                         |
    |--- offer(SDP) ------->|------ offer(SDP) ------>|
    |<-- ------------------|<-- answer(SDP) <---------|
    |--- ice-candidate --->|----- ice-candidate ----->|
    |<-- ------------------|<-- ice-candidate <-------|
    â†“ P2P ì—°ê²° ì„±ë¦½ â†’ ë¯¸ë””ì–´ ì§ì ‘ ì „ì†¡ â†“
```


---

5. ì „ì²´ ì•„í‚¤í…ì²˜ í†µí•© ê·¸ë¦¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ê³ ê°(QR)      â”‚    â”‚  Socket.IO       â”‚    â”‚   ìƒë‹´ì›         â”‚
â”‚ - room_id ìƒì„±  â”‚â—„â”€â”€â–ºâ”‚ - JWT ì¸ì¦       â”‚â—„â”€â”€â–ºâ”‚ - ë¡œê·¸ì¸(JWT)   â”‚
â”‚ - ê³ ê°ì •ë³´ ìž…ë ¥ â”‚    â”‚ - offer/answer   â”‚    â”‚ - ëŒ€ì‹œë³´ë“œ       â”‚
â”‚ - í†µí™”ì‹œìž‘      â”‚    â”‚ - ICE ì¤‘ê³„       â”‚    â”‚ - ìˆ˜ì‹ /ê±°ì ˆ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚            â”‚              â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
              â”‚ STUN/TURN â”‚ â”‚   STT    â”‚ â”‚ ë§ˆìŠ¤í‚¹  â”‚
              â”‚ (ë¯¸ë””ì–´   â”‚ â”‚ (ìžë§‰)   â”‚ â”‚ (ìš•ì„¤)  â”‚
              â”‚  ê²½ë¡œ)    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```